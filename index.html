<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-bn="pageTitle">টেলিগ্রাম বাজার প্রিমিয়াম</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Da+2:wght@400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        /* ======================================= */
        /* সাধারণ ও বেস স্টাইল             */
        /* ======================================= */
        body {
            font-family: 'Baloo Da 2', 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2ebf2 100%); 
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            color: #1a237e;
            padding-top: 30px;
            padding-bottom: 90px;
        }
        .container {
            width: 100%;
            max-width: 400px;
            background-color: #ffffff;
            padding: 30px 25px;
            border-radius: 25px; 
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15); 
            text-align: center;
            transition: all 0.4s ease-in-out;
            border: 1px solid #e0f7fa;
        }
        .hidden { display: none !important; }
        a { text-decoration: none; color: inherit; }
        .action-button { 
            padding: 8px 12px; 
            font-size: 0.8em; 
            font-weight: 600; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            text-decoration: none; 
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .btn-demo { background-color: #e0f2f1; color: #00897b; box-shadow: 0 2px 5px rgba(0, 137, 123, 0.2);} 

        /* ব্যাক বাটন স্টাইল */
        .back-link, .back-to-home-button { 
            display: block; 
            color: #1a237e; 
            text-decoration: none; 
            font-weight: 600;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #cfd8dc;
            background-color: #e3f2fd; 
            margin-top: 20px;
            width: 100%; 
            box-sizing: border-box; 
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .back-to-home-button {
            background-color: #90a4ae; 
            color: white; 
            box-shadow: 0 4px 10px rgba(144, 164, 174, 0.4); 
        }

        /* গ্রুপ কার্ডের বাটন সুবিন্যস্তকরণ */
        .group-card { 
            background-color: #f7f7f7; 
            padding: 15px; 
            border-radius: 12px; 
            border: 1px solid #e0e0e0; 
            text-align: left; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); 
            margin-bottom: 15px; 
        }
        .group-actions {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr; /* ৩টি কলাম */
            gap: 8px;
            margin-top: 10px;
        }
        .btn-add { background-color: #4CAF50; color: white; }
        .btn-add.added { background-color: #e53935; }
        .btn-buy-single { background-color: #ff9800; color: white; } 

        /* ======================================= */
        /* হোম পেজ স্টাইল (আপডেট করা) */
        /* ======================================= */
        h1 { margin-top: 0; font-size: 1.8em; color: #1a237e; }
        .rocket { font-size: 1.2em; }
        .logo-18-plus { 
            display: inline-block; 
            background-color: #e53935; 
            color: white; 
            padding: 4px 10px; 
            border-radius: 15px; 
            font-weight: 700; 
            font-size: 0.9em;
            margin-bottom: 15px; 
            box-shadow: 0 2px 5px rgba(229, 57, 53, 0.5);
        }
        .intro-note {
            font-size: 0.95em;
            color: #455a64;
            line-height: 1.4;
            margin-bottom: 25px;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 10px;
            border-left: 5px solid #4CAF50;
        }
        
        /* নতুন বাটন গ্রিড স্টাইল */
        .button-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* ২x২ গ্রিড */
            gap: 15px;
            margin-bottom: 20px;
        }
        .main-button {
            padding: 18px 10px;
            font-size: 1em;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .main-button i { font-size: 1.5em; margin-bottom: 5px; }

        /* বাটন কালার */
        .btn-group { background: linear-gradient(45deg, #0288d1, #03a9f4); } /* নীল */
        .btn-review { background: linear-gradient(45deg, #fbc02d, #ffeb3b); color: #444; } /* হলুদ */
        .btn-history { background: linear-gradient(45deg, #6a1b9a, #9c27b0); } /* বেগুনি */
        .btn-cart { background: linear-gradient(45deg, #e64a19, #ff7043); } /* কমলা */
        
        .main-button:active { transform: scale(0.95); }

        /* ব্যবহারকারী কাউন্ট বাটন */
        .user-count-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 15px;
            background-color: #4CAF50; /* সবুজ */
            color: white;
            font-weight: 800;
            font-size: 1.1em;
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.5);
            margin-bottom: 25px;
            transition: all 0.3s;
            cursor: default;
        }
        .user-count-button i { margin-right: 10px; font-size: 1.2em; }

        /* ভাষা পরিবর্তন বাটন স্টাইল */
        .language-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        .lang-button {
            padding: 8px 15px;
            font-weight: 700;
            border: 2px solid #3949ab;
            background-color: #e3f2fd;
            color: #3949ab;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .lang-button.active {
            background-color: #3949ab;
            color: white;
            box-shadow: 0 4px 8px rgba(57, 73, 171, 0.5);
        }


        .home-bottom-section h2 { 
            color: #3949ab; 
            border-bottom: 2px solid #e3f2fd; 
            padding-bottom: 5px; 
            margin-top: 30px; 
            font-size: 1.3em;
        }
        .support-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            margin: 8px 0;
            background-color: #f7f7f7;
            border-radius: 8px;
            color: #1a237e;
            font-weight: 500;
            border: 1px solid #e0e0e0;
            transition: background-color 0.2s;
        }
        .support-link i { font-size: 1.2em; }
        .support-link:hover { background-color: #e3f2fd; }
        .copyright { font-size: 0.75em; color: #90a4ae; margin-top: 30px; }


        /* ======================================= */
        /* ইউনিক সার্চ বার স্টাইল (অপরিবর্তিত) */
        /* ======================================= */
        .search-container {
            position: relative;
            margin-bottom: 25px;
        }
        #group-search-bar {
            width: 100%;
            padding: 12px 12px 12px 40px; /* আইকনের জন্য বামে প্যাডিং */
            border: none;
            border-radius: 10px;
            font-size: 1em;
            box-sizing: border-box;
            background-color: #f1f8e9; /* হালকা সবুজ ব্যাকগ্রাউন্ড */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            outline: none;
            border: 2px solid transparent;
        }
        #group-search-bar:focus {
            border-color: #4CAF50;
            background-color: #ffffff;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #4CAF50;
            font-size: 1.1em;
            pointer-events: none;
        }

        /* ======================================= */
        /* সুবিন্যস্ত পেজিনেশন বাটন স্টাইল (অপরিবর্তিত) */
        /* ======================================= */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 10px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .pagination button {
            flex-grow: 1;
            margin: 0 5px;
            padding: 10px 15px;
            font-weight: 700;
            border: 2px solid #3949ab;
            background-color: #e3f2fd;
            color: #3949ab;
            border-radius: 8px;
            transition: all 0.2s;
        }
        .pagination button:hover:not(:disabled) {
            background-color: #3949ab;
            color: white;
            box-shadow: 0 4px 8px rgba(57, 73, 171, 0.5);
        }
        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #90a4ae;
            background-color: #cfd8dc;
        }
        #page-info {
            flex-shrink: 0;
            padding: 0 10px;
            color: #1a237e;
            font-weight: 800;
            font-size: 1.1em;
        }

        /* ======================================= */
        /* পেমেন্ট পেজ (ছোট ও মসৃণ বক্স) (অপরিবর্তিত) */
        /* ======================================= */
        .group-summary-payment {
            padding: 15px;
            border-radius: 10px;
            background-color: #fff3e0;
            color: #e65100;
            font-weight: 600;
            margin-bottom: 20px;
        }
        .payment-step { 
            padding: 15px; 
            margin-bottom: 12px; /* সংকুচিত */
            border-radius: 12px;
            background-color: #f7f7f7;
            border-left: 5px solid #3949ab;
        }
        .payment-account-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px; /* সংকুচিত */
            margin-bottom: 6px; /* সংকুচিত */
            border-radius: 8px;
            background-color: #ffffff;
            border: 1px solid #bbdefb;
            font-size: 0.9em;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); 
        }
        .account-number { font-size: 1em; font-weight: 600; } 
        .copy-button { 
            padding: 5px 10px; 
            font-size: 0.8em; 
            border-radius: 5px; 
            background-color: #039be5;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        } /* সংকুচিত */
        .payment-form input[type="text"] {
            width: 100%;
            padding: 10px; 
            margin-bottom: 10px; 
            font-size: 0.9em;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
        }
        .submit-button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #10b981, #059669); 
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.4);
            transition: all 0.2s;
            margin-top: 10px;
        }


        /* ======================================= */
        /* রিভিউ কার্ড এবং মতামত বক্স স্টাইল (অপরিবর্তিত) */
        /* ======================================= */
        .feedback-section {
            background-color: #e3f2fd; /* হালকা নীল ব্যাকগ্রাউন্ড */
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(57, 73, 171, 0.15);
            border: 2px solid #3949ab;
        }
        .feedback-section h3 { color: #3949ab; margin-bottom: 15px; font-size: 1.5em; }
        #user-review {
            width: 100%;
            padding: 12px;
            border: 1px solid #bbdefb;
            border-radius: 10px; /* গোল কোণা */
            box-sizing: border-box;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
            font-size: 0.95em;
            margin-bottom: 15px;
            transition: border-color 0.3s;
            background-color: #ffffff;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        #user-review:focus {
            border-color: #3949ab;
            box-shadow: 0 0 5px rgba(57, 73, 171, 0.5);
        }
        .submit-review-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(45deg, #3949ab, #1a237e); /* প্রিমিয়াম নীল */
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1.05em;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(57, 73, 171, 0.5);
            transition: all 0.2s;
        }
        
        /* রিভিউ কার্ড স্টাইল (রিয়েলিস্টিক ও সুগঠিত) */
        .review-card {
            display: flex;
            align-items: flex-start;
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            text-align: left;
        }
        .review-profile {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 700;
            font-size: 1.1em;
            flex-shrink: 0;
            margin-right: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .review-content { flex-grow: 1; }
        .review-content .name { font-weight: 700; color: #3949ab; margin: 0 0 3px 0; font-size: 1em; }
        .review-content .text { font-size: 0.9em; color: #455a64; line-height: 1.4; margin: 0; }
        .review-actions {
            display: flex;
            align-items: center;
            font-size: 0.9em;
            color: #90a4ae;
            margin-top: 5px;
            flex-shrink: 0;
            margin-left: 10px;
        }
        .like-button { color: #1e88e5; margin-right: 5px; }
        
        /* সাফল্যের প্রমাণপত্র স্টাইল */
        .certificate-box {
            background-color: #e8f5e9;
            border: 2px solid #4CAF50;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: left;
        }
        .certificate-box h3 {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px dashed #a5d6a7;
        }
        .cert-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.95em;
            color: #1a237e;
            font-weight: 500;
        }
        .cert-item i {
            color: #4CAF50;
            margin-right: 10px;
            font-size: 1.1em;
            width: 20px;
            text-align: center;
        }
        .cert-label {
            font-weight: 700;
            color: #388e3c;
            width: 150px; /* লেবেলের জন্য নির্দিষ্ট প্রস্থ */
            flex-shrink: 0;
        }
        .cert-value {
            flex-grow: 1;
            font-weight: 600;
            color: #0d47a1;
        }
        .cert-value.price {
            color: #e53935;
            font-size: 1.1em;
            font-weight: 800;
        }
        .download-button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #1e88e5, #0d47a1);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(30, 136, 229, 0.5);
            transition: all 0.2s;
            margin-bottom: 15px;
        }
        
        /* ক্রয়ের ইতিহাস স্টাইল */
        .history-item {
            background-color: #ffffff;
            border: 1px solid #ffcc80;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }
        .history-item-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn-download-history, .btn-support {
            flex-grow: 1;
            padding: 8px;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            text-decoration: none;
        }
        .btn-download-history { background-color: #039be5; color: white; }
        .btn-support { background-color: #e0f2f1; color: #00897b; }

        /* সিম্পল পপ-আপ স্টাইল (অপরিবর্তিত) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); 
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000; 
            backdrop-filter: blur(2px);
        }

        .modal-content {
            background-color: #ffffff; 
            padding: 25px 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 300px; 
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transform: scale(0.95);
            animation: fadeInScale 0.4s forwards; 
            border: 3px solid #3949ab; 
            overflow: hidden;
        }
        @keyframes fadeInScale { 100% { transform: scale(1); opacity: 1; } }

        .modal-content .header-icon {
            font-size: 2em; 
            color: #d32f2f; 
            margin-bottom: 10px;
        }

        .modal-content h3 {
            color: #1a237e;
            font-size: 1.4em; 
            margin-bottom: 5px;
            font-weight: 700;
        }
        .modal-content p {
            color: #546e7a;
            font-size: 0.9em; 
            margin-bottom: 20px;
            line-height: 1.4;
        }
        .modal-buttons {
            display: flex;
            flex-direction: column; 
            gap: 10px;
        }
        .modal-btn {
            width: 100%;
            padding: 10px 15px; 
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }
        .btn-join {
            background: linear-gradient(45deg, #00897b, #004d40); 
            color: white;
            box-shadow: 0 4px 10px rgba(0, 137, 123, 0.4);
        }
        .btn-close {
            background-color: #eceff1;
            color: #455a64;
            border: 1px solid #cfd8dc;
        }

        /* অন্যান্য প্রয়োজনীয় স্টাইল (অপরিবর্তিত) */
        .live-support-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #039be5;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9em;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
        }
        .live-support-button:hover { background-color: #0277bd; }
        .live-support-button i { margin-right: 8px; font-size: 1.1em; }
        .cart-summary {
            background-color: #f1f8e9;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #c8e6c9;
        }
        .summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2em;
            font-weight: 700;
            color: #00897b;
            margin-bottom: 15px;
        }


    </style>
</head>
<body data-lang="bn">
    
    <div id="welcome-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="header-icon"><i class="fas fa-crown"></i></div>
            <h3 data-bn="premiumAccessTitle">প্রিমিয়াম অ্যাক্সেস</h3>
            <p data-bn="popupMessage">আমাদের বিশেষ টেলিগ্রাম গ্রুপগুলোতে আপনাকে স্বাগতম! প্রিমিয়াম কন্টেন্টের জন্য এখনই জয়েন করুন।</p>
            <div class="modal-buttons">
                <a href="YOUR_TELEGRAM_GROUP_LINK_HERE" target="_blank" class="modal-btn btn-join">
                    <i class="fab fa-telegram-plane"></i> <span data-bn="joinNow">জয়েন করুন</span>
                </a>
                <button class="modal-btn btn-close" onclick="closeModal()">
                    <i class="fas fa-times"></i> <span data-bn="close">কেটে দিন</span>
                </button>
            </div>
        </div>
    </div>


    <div class="container" id="main-container">

        <div class="language-switcher">
            <button id="lang-bn" class="lang-button active" onclick="setLanguage('bn')">বাংলা</button>
            <button id="lang-en" class="lang-button" onclick="setLanguage('en')">English</button>
        </div>
        
        <div id="main-interface" class="hidden">
            <h1 data-bn="headerTitle">টেলিগ্রাম বাজার <span class="rocket">🚀💬</span></h1>
            <div class="logo-18-plus">18+</div>
            <p class="intro-note" data-bn="introNote">💡 টেলিগ্রাম গ্রুপ ডিল - প্রিমিয়াম ভিডিও, 4K Plus Regulations, লো প্রাইজ এবং ফাস্ট সার্ভিস! পান না যায় এমন সকল কন্টেন্ট এখনই আবেদন করুন 🔥</p>
            
            <div class="button-grid">
                <button class="main-button btn-group" onclick="showGroupsInterface()"><i class="fas fa-users"></i> <span data-bn="viewGroups">গ্রুপ দেখুন</span></button> 
                <button class="main-button btn-review" onclick="showReviewInterface()"><i class="fas fa-star"></i> <span data-bn="viewReviews">রিভিউ দেখুন</span></button>
                <button class="main-button btn-history" onclick="showHistoryInterface()"><i class="fas fa-history"></i> <span data-bn="purchaseHistory">ক্রয়ের ইতিহাস</span></button>
                <button class="main-button btn-cart" onclick="showCartInterface()"><i class="fas fa-shopping-cart"></i> <span data-bn="viewCart">কার্ট দেখুন</span> <span id="cart-count" style="margin-top: 5px;">(০)</span></button>
            </div>
            
            <button class="user-count-button"><i class="fas fa-chart-line"></i> <span data-bn="userCountLabel">ব্যবহারকারী</span>: <span id="user-count"></span>+</button>
            
            <div class="home-bottom-section">
                <h2 data-bn="aboutUsTitle">আমাদের সম্পর্কে</h2>
                <p data-bn="aboutUsText">টেলিগ্রাম বাজার হলো একটি প্ল্যাটফর্ম যেখানে ব্যবহারকারীরা টেলিগ্রাম গ্রুপ বিশ্বাসের সাথে কিনতে পারেন। আমার সততার সাথে সার্ভিস দিয়ে আসছি। আমাদের সাথে থাকুন ধন্যবাদ 🔥</p>

                <h2 data-bn="supportTitle">সাপোর্ট</h2>
                <a href="https://wa.me/XXXXXXXXXX" target="_blank" class="support-link"><i class="fab fa-whatsapp"></i> WhatsApp: <span data-bn="clickHere">এখানে ক্লিক করুন</span></a>
                <a href="mailto:support@example.com" class="support-link"><i class="fas fa-envelope"></i> Email: support@example.com</a>
                <a href="YOUR_TELEGRAM_GROUP_LINK" target="_blank" class="support-link"><i class="fab fa-telegram-plane"></i> Telegram: <span data-bn="clickHere">এখানে ক্লিক করুন</span></a>
            </div>
            
            <p class="copyright" data-bn="copyright">© 2025 টেলিগ্রাম বাজার | সমস্ত অধিকার সংরক্ষিত।</p>
        </div>

        
        <div id="groups-interface" class="hidden">
            <h2 data-bn="groupListTitle">18+ গ্রুপ সমূহ <span class="icon">🔞</span></h2>
            
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="group-search-bar" onkeyup="filterGroups()" data-bn="searchPlaceholder" placeholder="গ্রুপ নাম বা বিবরণ দিয়ে সার্চ করুন...">
            </div>

            <div class="group-list" id="group-list">
                </div>
            
            <div class="pagination">
                <button id="prev-button" onclick="changePage(-1)" disabled>
                    <i class="fas fa-arrow-left"></i> <span data-bn="previous">পূর্ববর্তী</span>
                </button>
                <span id="page-info" data-bn="pageInfo">পৃষ্ঠা ১</span>
                <button id="next-button" onclick="changePage(1)">
                    <span data-bn="next">পরবর্তী</span> <i class="fas fa-arrow-right"></i>
                </button>
            </div>
             
            <button class="back-link" onclick="showMainInterface()"><i class="fas fa-arrow-left"></i> <span data-bn="backToHome">হোম পেজে ফিরে যান</span></button>
        </div>
        
        <div id="cart-interface" class="hidden">
            <h2 style="color: #00897b;"><span data-bn="myCartTitle">আমার কার্ট</span> <i class="fas fa-shopping-bag"></i></h2>
            <div id="cart-items-list" style="margin-bottom: 20px;"></div>
            <div class="cart-summary">
                <div class="summary-total">
                    <span data-bn="totalPriceLabel">মোট দাম:</span>
                    <span id="cart-total-price">৳ ০</span>
                </div>
                <button class="back-to-home-button" style="background: linear-gradient(45deg, #10b981, #059669); color: white;" id="buy-all-btn" onclick="checkoutFromCart()">
                    <i class="fas fa-money-bill-wave"></i> <span data-bn="buyAll">একসাথে সব কিনুন</span>
                </button>
            </div>
            <button class="back-link" onclick="showMainInterface()"><i class="fas fa-arrow-left"></i> <span data-bn="backToHome">হোম পেজে ফিরে যান</span></button>
        </div>

        <div id="payment-interface" class="hidden">
            <h2 data-bn="completePaymentTitle"><i class="fas fa-credit-card"></i> পেমেন্ট সম্পন্ন করুন</h2>

            <div class="group-summary-payment">
                <span data-bn="buyingGroup">আপনি কিনছেন</span>: <span id="payment-group-name"></span><br>
                <span data-bn="totalPriceLabel">মোট মূল্য</span>: <span id="payment-group-price"></span> ৳
            </div>
            
            <div class="payment-step">
                <h3 data-bn="step1Title"><i class="fas fa-mobile-alt"></i> ধাপ ১: পেমেন্ট করুন</h3>
                <p style="font-size: 0.9em; color: #555;" data-bn="step1Instruction">নিচের যেকোনো একটি নম্বরে **Send Money** করুন।</p>
                <div class="payment-account-card">
                    <span class="account-number">01718189653 (Bkash)</span>
                    <button class="copy-button" data-bn="copyButton" onclick="copyToClipboard('01718189653')">কপি</button>
                </div>
                <div class="payment-account-card">
                    <span class="account-number">01811384582 (Nagad)</span>
                    <button class="copy-button" data-bn="copyButton" onclick="copyToClipboard('01811384582')">কপি</button>
                </div>
            </div>

            <div class="payment-step" style="background-color: #e8f5e9; border-left: 5px solid #43a047;">
                <h3 data-bn="step2Title"><i class="fas fa-keyboard"></i> ধাপ ২: ফর্ম পূরণ</h3>
                <form class="payment-form" onsubmit="submitPayment(event)">
                    <p style="text-align: left; font-size: 0.9em; color: #555; margin-bottom: 5px;" data-bn="telegramInfoText">যে টেলিগ্রাম আইডিতে এড হবে সেই আইডিটার তথ্য দিন:</p>
                    <input type="text" id="user-name" data-bn="yourNamePlaceholder" placeholder="আপনার নাম" required>
                    <input type="text" id="telegram-username" placeholder="টেলিগ্রাম ইউজারনেম (@username)" required>
                    
                    <p style="text-align: left; font-size: 0.9em; color: #555; margin-bottom: 5px; margin-top: 10px;" data-bn="transactionIdText">ট্রানজেকশন আইডি:</p>
                    <input type="text" id="transaction-id" data-bn="transactionIdPlaceholder" placeholder="ট্রানজেকশন আইডি (Txn ID)" required>
                    <input type="hidden" id="group-id-for-payment">

                    <button type="submit" class="submit-button" data-bn="submitPayment"><i class="fas fa-check-circle"></i> Submit Payment</button>
                </form>
            </div>
            
            <button class="back-link" id="payment-back-link" onclick="handlePaymentBack()"><i class="fas fa-arrow-left"></i> <span data-bn="back">Back</span></button>
        </div>


        <div id="success-interface" class="hidden">
            <h2 style="color: #43a047; font-size: 1.8em;"><i class="fas fa-check-circle"></i> <span data-bn="applicationComplete">আবেদন সম্পন্ন!</span></h2>
            <p style="margin-bottom: 25px; color: #388e3c; font-weight: 500;" data-bn="successMessage">তোমার আবেদন গ্রহণ করা হয়েছে — **এই তথ্য সরাসরি টেলিগ্রাম বটে পাঠানো হয়েছে!** যাচাইয়ের পর লিংক দেওয়া হবে! ধন্যবাদ 😊</p>

            <div class="certificate-box" id="certificate-to-download"> 
                <h3 style="margin-top: 0; color: #1e3a8a; font-weight: 700;" data-bn="telegramBazarTitle">টেলিগ্রাম বাজার</h3>
                
                <div class="cert-item"><i class="fas fa-user-tag"></i> <span class="cert-label" data-bn="certNameLabel">নাম:</span> <span id="cert-name" class="cert-value"></span></div>
                <div class="cert-item"><i class="fas fa-users"></i> <span class="cert-label" data-bn="certGroupLabel">গ্রুপ:</span> <span id="cert-group" class="cert-value"></span></div>
                <div class="cert-item"><i class="fas fa-money-check-alt"></i> <span class="cert-label" data-bn="certTxnIdLabel">ট্রানজেকশন আইডি:</span> <span id="cert-txnid" class="cert-value"></span></div>
                <div class="cert-item"><i class="fas fa-key"></i> <span class="cert-label" data-bn="certVerifyCodeLabel">যাচাই কোড:</span> <span id="cert-code" class="cert-value"></span></div>
                <div class="cert-item"><i class="fas fa-clock"></i> <span class="cert-label" data-bn="certTimeLabel">সময়:</span> <span id="cert-time" class="cert-value"></span></div>
                <div class="cert-item"><i class="fas fa-money-bill-wave"></i> <span class="cert-label" data-bn="certPriceLabel">দাম:</span> <span id="cert-price" class="cert-value price"></span></div>
            </div>

            <button class="download-button" data-bn="downloadCertificate" onclick="downloadCertificate()">
                <i class="fas fa-download"></i> প্রমাণপত্র ডাউনলোড
            </button>
            <button class="back-to-home-button" onclick="showMainInterface()"><i class="fas fa-home"></i> <span data-bn="backToHome">Back to Home</span></button>
        </div>

        <div id="history-interface" class="hidden">
            <h2 style="color: #ff9800;"><span data-bn="purchaseHistoryTitle">ক্রয়ের ইতিহাস</span> <i class="fas fa-history"></i></h2>
            <div id="history-list" style="text-align: left;">
                <p style="text-align: center; color: #999;" data-bn="noHistoryMessage">কোনো ক্রয়ের ইতিহাস পাওয়া যায়নি।</p>
            </div>
            <button class="back-link" onclick="showMainInterface()"><i class="fas fa-arrow-left"></i> <span data-bn="backToHome">হোম পেজে ফিরে যান</span></button>
        </div>
        
        <div id="review-interface" class="hidden">
            <h2 data-bn="reviewTitle">রিয়েলিস্টিক রিভিউস</h2>
            
            <div id="reviews-list">
                </div>

            <div class="feedback-section">
                <h3 data-bn="submitReviewTitle">আপনার মতামত দিন</h3>
                <p style="font-size: 0.9em; color: #546e7a; margin-bottom: 10px;" data-bn="reviewInstruction">আপনার মূল্যবান মতামত এখানে লিখুন...</p>
                <textarea id="user-review" data-bn="reviewPlaceholder" placeholder="আপনার রিভিউ এখানে লিখুন..."></textarea>
                <button class="submit-review-button" data-bn="submitReviewButton" onclick="submitReview()">মতামত জমা দিন</button>
            </div>
            
            <button class="back-link" onclick="showMainInterface()"><i class="fas fa-arrow-left"></i> <span data-bn="back">Back</span></button>
        </div>


    </div>

    <a href="YOUR_TELEGRAM_GROUP_LINK" target="_blank" class="live-support-button">
        <i class="fab fa-telegram-plane"></i> <span data-bn="liveSupport">লাইভ সাপোর্ট</span>
    </a>

    <script>
        // =======================================
        //              JavaScript Logic
        // =======================================

        const TELEGRAM_BOT_API_URL = 'YOUR_SERVER_OR_TELEGRAM_BOT_API_ENDPOINT_HERE'; 
        const SUPPORT_LINK = "https://wa.me/8801718189653?text=আমার%20ট্রানজেকশন%20আইডি:%20[TXN_ID]%20।%20আমি%20এখনো%20গ্রুপ%20এড%20পাইনি।";
        const POPUP_TELEGRAM_LINK = "YOUR_TELEGRAM_GROUP_LINK_HERE"; 
        
        // --- লোকাল স্টোরেজ কী (KEY) ---
        const LOCAL_STORAGE_KEYS = {
            CART: 'telegramBazarCart',
            HISTORY: 'telegramBazarHistory',
            USER_COUNT: 'telegramBazarUserCount',
            LANGUAGE: 'telegramBazarLanguage',
            CURRENT_INTERFACE: 'telegramBazarCurrentInterface' 
        };

        // --- ট্রান্সলেশন ডেটা অবজেক্ট ---
        const translations = {
            en: {
                pageTitle: "Telegram Bazar Premium",
                premiumAccessTitle: "Premium Access",
                popupMessage: "Welcome to our special Telegram groups! Join now for premium content.",
                joinNow: "Join Now",
                close: "Close",
                headerTitle: "Telegram Bazar",
                viewGroups: "View Groups",
                viewReviews: "View Reviews",
                purchaseHistory: "Purchase History",
                viewCart: "View Cart",
                userCountLabel: "Users",
                aboutUsTitle: "About Us",
                aboutUsText: "Telegram Bazar is a platform where users can reliably buy Telegram groups. We provide services with honesty. Thank you for staying with us 🔥",
                supportTitle: "Support",
                clickHere: "Click Here",
                copyright: "© 2025 Telegram Bazar | All rights reserved.",
                groupListTitle: "18+ Groups",
                searchPlaceholder: "Search by Group Name or Description...",
                previous: "Previous",
                next: "Next",
                pageInfo: "Page 1", 
                backToHome: "Back to Home",
                myCartTitle: "My Cart",
                totalPriceLabel: "Total Price:",
                buyAll: "Buy All Together",
                completePaymentTitle: "Complete Payment",
                buyingGroup: "You are buying",
                step1Title: "Step 1: Payment",
                step1Instruction: "Send Money to any of the numbers below.",
                copyButton: "Copy",
                step2Title: "Step 2: Fill the Form",
                telegramInfoText: "Provide information for the Telegram ID that will be added:",
                yourNamePlaceholder: "Your Name",
                transactionIdText: "Transaction ID:",
                transactionIdPlaceholder: "Transaction ID (Txn ID)",
                submitPayment: "Submit Payment",
                back: "Back",
                applicationComplete: "Application Complete!",
                successMessage: "Your application has been accepted — **This info has been sent directly to the Telegram bot!** Link will be given after verification! Thank you 😊",
                telegramBazarTitle: "Telegram Bazar",
                certNameLabel: "Name:",
                certGroupLabel: "Group:",
                certTxnIdLabel: "Transaction ID:",
                certVerifyCodeLabel: "Verify Code:",
                certTimeLabel: "Time:",
                certPriceLabel: "Price:",
                downloadCertificate: "Download Certificate",
                purchaseHistoryTitle: "Purchase History",
                noHistoryMessage: "No purchase history found.",
                reviewTitle: "Realistic Reviews",
                submitReviewTitle: "Submit Your Review",
                reviewInstruction: "Write your valuable feedback here...",
                reviewPlaceholder: "Write your review here...",
                submitReviewButton: "Submit Review",
                liveSupport: "Live Support",
                addToCart: "Add to Cart", // Dynamically translated in createGroupCard
                removeFromCart: "Remove", // Dynamically translated in createGroupCard
                buyNow: "Buy Now", // Dynamically translated in createGroupCard
                demo: "Demo", // Dynamically translated in createGroupCard
                videoCount: "Videos:", // Dynamically translated in createGroupCard
                removed: "Removed", // Used in JS alerts
                addedToCart: "added to cart!", // Used in JS alerts
                removedFromCart: "removed from cart.", // Used in JS alerts
                comboPrice: "Combo price", // Used in JS alerts
                cartEmpty: "Cart is empty!", // Used in JS alerts
            }
        };

        // --- গ্রুপ ডেটা (৩০+ গ্রুপ) --- (অপরিবর্তিত)
        const allGroups = [
            { id: 1, name: "Pee In Public (HD)", count: 250, desc: "সকল Hidden peeing প্রিমিয়াম ভিডিও ও 4K কোয়ালিটি...", price: 199, demoLink: "https://t.me/example_demo_1" },
            { id: 2, name: "Kerala Premium (New)", count: 120, desc: "সকল কেরালার নতুন প্রিমিয়াম ভিডিও ও ফটো...", price: 120, demoLink: "https://t.me/example_demo_2" },
            { id: 3, name: "দেশি ভিডিও (4K)", count: 320, desc: "সকল ভাইয়েরা দেশি প্রিমিয়াম ভিডিও ও লাইভ টক...", price: 180, demoLink: "https://t.me/example_demo_3" },
            { id: 4, name: "Mix Video গ্রুপ (40K+)", count: 40000, desc: "40 হাজার গ্রাম ভিডিও ও ফটো সাথে লাইভ আপডেট...", price: 100, demoLink: "https://t.me/example_demo_4" },
            { id: 5, name: "Foreign XXX Exclusive", count: 850, desc: "এক্সক্লুসিভ বিদেশী কন্টেন্ট ও লাইভ শো।", price: 250, demoLink: "https://t.me/example_demo_5" },
            { id: 6, name: "Anime Girls 18+ VIP", count: 600, desc: "এনিমে ভক্তদের জন্য বিশেষ 18+ কালেকশন।", price: 90, demoLink: "https://t.me/example_demo_6" },
            { id: 7, name: "Hidden Cam (HD)", count: 5600, desc: "সংগোপনে ভিডিও এবং প্রিমিয়াম কন্টেন্ট।", price: 249, demoLink: "https://t.me/example_demo_7" },
            { id: 8, name: "Actress Hot Photos", count: 50000, desc: "একসাথে তারকাদের 50 হাজার ছবি ও ভিডিও।", price: 49, demoLink: "https://t.me/example_demo_8" },
            { id: 9, name: "আদি লাভার গ্রুপ", count: 4700, desc: "কেরালা ও সাউথ ইন্ডিয়ান লাভারদের জন্য বিশেষ।", price: 59, demoLink: "https://t.me/example_demo_9" },
            { id: 10, name: "Indian Bhabi Collection", count: 1500, desc: "প্রিমিয়াম ভাবি ভিডিও ও প্রাইভেট লাইভ চ্যাট।", price: 175, demoLink: "https://t.me/example_demo_10" },
            { id: 11, name: "Pakistani New Leaks", count: 900, desc: "পাকিস্তানি নতুন লিকস এবং ভিডিও।", price: 150, demoLink: "https://t.me/example_demo_11" },
            { id: 12, name: "Live Nude Stream", count: 35, desc: "দৈনিক নতুন লাইভ স্ট্রিম।", price: 300, demoLink: "https://tme/example_demo_12" },
            { id: 13, name: "Public Transport Hot", count: 700, desc: "বাস/ট্রেন পাবলিক ভিডিও।", price: 110, demoLink: "https://t.me/example_demo_13" },
            { id: 14, name: "Office Romance VIP", count: 1800, desc: "অফিসের গোপন ক্যামেরার ভিডিও।", price: 165, demoLink: "https://t.me/example_demo_14" },
            { id: 15, name: "College Girl Collection", count: 2200, desc: "কলেজ ছাত্রীদের এক্সক্লুসিভ ভিডিও।", price: 200, demoLink: "https://t.me/example_demo_15" },
            { id: 16, name: "Russian Models (4K)", count: 1400, desc: "রাশিয়ান মডেলদের প্রিমিয়াম কন্টেন্ট।", price: 220, demoLink: "https://t.me/example_demo_16" },
            { id: 17, name: "Thai Massage Exposed", count: 800, desc: "থাই ম্যাসেজ পার্লারের ভিডিও।", price: 95, demoLink: "https://t.me/example_demo_17" },
            { id: 18, name: "Village Hotshots", count: 3000, desc: "গ্রামের পরিবেশের হট ভিডিও।", price: 130, demoLink: "https://t.me/example_demo_18" },
            { id: 19, name: "MILF Hunter Group", count: 1100, desc: "বয়স্ক মহিলাদের এক্সক্লুসিভ কালেকশন।", price: 190, demoLink: "https://t.me/example_demo_19" },
            { id: 20, name: "Gangbang Party Clips", count: 450, desc: "পার্টির গোপন ভিডিও।", price: 280, demoLink: "https://t.me/example_demo_20" },
            { id: 21, name: "European Escorts", count: 1600, desc: "ইউরোপীয় এসকোর্টদের প্রিমিয়াম ভিডিও।", price: 210, demoLink: "https://t.me/example_demo_21" },
            { id: 22, name: "Japanese Uncensored", count: 950, desc: "জাপানিজ আনসেন্সরড মুভি।", price: 140, demoLink: "https://t.me/example_demo_22" },
            { id: 23, name: "Gym Locker Room", count: 550, desc: "জিম লকার রুমের গোপন দৃশ্য।", price: 85, demoLink: "https://t.me/example_demo_23" },
            { id: 24, name: "Solo Girls Live", count: 100, desc: "মেয়েদের একক লাইভ স্ট্রিমিং।", price: 260, demoLink: "https://t.me/example_demo_24" },
            { id: 25, name: "BDSM Extreme", count: 750, desc: "বিডিএসএম প্রিমিয়াম কালেকশন।", price: 320, demoLink: "https://t.me/example_demo_25" },
            { id: 26, name: "Latinas Hot", count: 1300, desc: "ল্যাটিনা মেয়েদের ভিডিও।", price: 155, demoLink: "https://t.me/example_demo_26" },
            { id: 27, name: "Korean Celeb Leaks", count: 650, desc: "কোরিয়ান সেলিব্রেটিদের লিক।", price: 185, demoLink: "https://t.me/example_demo_27" },
            { id: 28, name: "African Girls Premium", count: 1700, desc: "আফ্রিকান মডেলদের প্রিমিয়াম কন্টেন্ট।", price: 170, demoLink: "https://t.me/example_demo_28" },
            { id: 29, name: "Hotel Hidden Cam 2", count: 1900, desc: "হোটেলের গোপন ক্যামেরা ভিডিওর দ্বিতীয় পার্ট।", price: 230, demoLink: "https://t.me/example_demo_29" },
            { id: 30, name: "Big Ass Collection", count: 4000, desc: "বিশাল নিতম্বের ভিডিও কালেকশন।", price: 75, demoLink: "https://t.me/example_demo_30" },
            { id: 31, name: "Indian Web Series Uncut", count: 150, desc: "আনকাট ওয়েব সিরিজ ক্লিপ।", price: 145, demoLink: "https://t.me/example_demo_31" },
            { id: 32, name: "USA Amateur Videos", count: 2800, desc: "আমেরিকান শখের ভিডিও।", price: 115, demoLink: "https://t.me/example_demo_32" },
            { id: 33, name: "School Girl Secrets", count: 600, desc: "স্কুল ছাত্রীদের গোপন ভিডিও।", price: 299, demoLink: "https://t.me/example_demo_33" },
            { id: 34, name: "OnlyFans Leaks VIP", count: 7500, desc: "OnlyFans থেকে লিক করা প্রিমিয়াম কন্টেন্ট।", price: 350, demoLink: "https://t.me/example_demo_34" },
            { id: 35, name: "New Updates Daily", count: 50, desc: "দৈনিক আপডেট হওয়া নতুন ভিডিওর গ্রুপ।", price: 105, demoLink: "https://t.me/example_demo_35" },
            { id: 36, name: "VIP Mega Pack 2025", count: 9999, desc: "সবচেয়ে বড় এবং সব গ্রুপের সমন্বয়!", price: 499, demoLink: "https://t.me/example_demo_36" },
        ];
        
        // --- রিভিউ ডেটা (১০টি) --- (অপরিবর্তিত)
        const allReviews = [
            { name: "Mr. Rumon", initial: "MR", text: "সেবা খুব ভালো। এখানে অনেক সুবিধা পেলাম। আমি নিশ্চিত যে এটা অন্য সব প্ল্যাটফর্মের থেকে সেরা।", likes: 12, color: "#00838f" },
            { name: "Md. Rakinul", initial: "MD", text: "গ্রুপগুলো বেশ আকর্ষণীয় এবং নিরাপদ। নিয়মিত নতুন কন্টেন্ট আপডেট হয়।", likes: 25, color: "#e53935" },
            { name: "Masum Ahmed", initial: "MA", text: "আমি নতুন সদস্য, কিন্তু সব কিছু সহজে বুঝতে পারলাম। সার্ভিস খুব দ্রুত এবং বিশ্বাসযোগ্য। কোনো ঝামেলা হয়নি।", likes: 30, color: "#43a047" },
            { name: "Rakib Islam", initial: "RI", text: "অপেক্ষা করতাম এমন একটা প্লাটফর্মের। এডমিন খুবই সহযোগী মনোভাবের, সাপোর্ট সার্ভিস অসাধারণ!", likes: 8, color: "#1e88e5" },
            { name: "Monika Sen", initial: "MS", text: "মোবাইল থেকে সব কাজ খুব সহজ। পেমেন্টের পর দ্রুত লিংক পেয়েছি। অভিজ্ঞতা খুবই ভালো।", likes: 45, color: "#ff9800" },
            { name: "Alif A.", initial: "AA", text: "কালেকশন অসাধারণ! প্রিমিয়াম কন্টেন্টের জন্য সেরা জায়গা। দামও সাধ্যের মধ্যে এবং কোয়ালিটি 4K.", likes: 15, color: "#795548" },
            { name: "S. K. Raiyan", initial: "SR", text: "ভিডিওর কোয়ালিটি খুবই ভালো। আশা করি সামনে আরও নতুন গ্রুপ যুক্ত হবে। এই সার্ভিস চালু থাকুক।", likes: 22, color: "#673ab7" },
            { name: "Nayeem B.", initial: "NB", text: "কোনো সমস্যা ছাড়াই পেমেন্ট এবং গ্রুপে জয়েন করতে পেরেছি। ধন্যবাদ এডমিন। আমি অন্যদেরও সুপারিশ করব।", likes: 18, color: "#f06292" },
            { name: "Jahid H.", initial: "JH", text: "কম্বো প্যাকেজটা নিয়েছি, সব গ্রুপ একসাথে পেয়ে অনেক খুশি! টাকার সম্পূর্ণ মূল্য পেয়েছি।", likes: 10, color: "#00bcd4" },
            { name: "Fahim Rahman", initial: "FR", text: "ডাউনলোড স্পীড ভালো এবং ভিডিওগুলো নিয়মিত আপডেট হয়। খুব দ্রুত সার্ভিস পেয়েছি।", likes: 35, color: "#ffc107" },
        ];

        let cart = []; 
        let purchaseHistory = []; 
        let currentGroupData = allGroups; 
        const groupsPerPage = 7; 
        let currentPage = 1; 
        let purchaseItem = null; 
        let lastInterface = 'groups'; 
        let currentLang = 'bn'; 
        
        // DOM Element References 
        const interfaces = ['main', 'groups', 'cart', 'payment', 'success', 'history', 'review'].map(id => document.getElementById(`${id}-interface`));
        const cartCountElement = document.getElementById('cart-count');
        const groupListElement = document.getElementById('group-list');
        const certificateToDownload = document.getElementById('certificate-to-download');
        const paymentBackLink = document.getElementById('payment-back-link');
        const userCountElement = document.getElementById('user-count');
        const welcomeModal = document.getElementById('welcome-modal'); 

        // --- ইউজার কাউন্ট লজিক --- 
        let currentCount = 10727; 

        // =======================================
        //          ডেটা লোড এবং সেভ লজিক 💾
        // =======================================
        function loadDataFromLocalStorage() {
            // ১. কার্ট লোড করুন
            const storedCart = localStorage.getItem(LOCAL_STORAGE_KEYS.CART);
            if (storedCart) {
                try { cart = JSON.parse(storedCart); } catch(e) { console.error("Error parsing cart data:", e); cart = []; }
            }

            // ২. ক্রয়ের ইতিহাস লোড করুন
            const storedHistory = localStorage.getItem(LOCAL_STORAGE_KEYS.HISTORY);
            if (storedHistory) {
                try { purchaseHistory = JSON.parse(storedHistory); } catch(e) { console.error("Error parsing history data:", e); purchaseHistory = []; }
            }

            // ৩. ইউজার কাউন্ট লোড করুন
            const storedCount = localStorage.getItem(LOCAL_STORAGE_KEYS.USER_COUNT);
            if (storedCount) {
                currentCount = parseInt(storedCount) || 10727;
            } else {
                // প্রথমবার ভিজিটর হলে ডিফল্ট ভ্যালু সেট করে সেভ করুন
                saveUserCount(); 
            }

            // ৪. ভাষা লোড করুন
            const storedLang = localStorage.getItem(LOCAL_STORAGE_KEYS.LANGUAGE);
            if (storedLang && (storedLang === 'bn' || storedLang === 'en')) {
                setLanguage(storedLang, false); // No need to save language again on load
            } else {
                setLanguage('bn'); // Default to Bengali
            }
        }
        
        function saveDataToLocalStorage() {
            localStorage.setItem(LOCAL_STORAGE_KEYS.CART, JSON.stringify(cart));
            localStorage.setItem(LOCAL_STORAGE_KEYS.HISTORY, JSON.stringify(purchaseHistory));
            // user count is saved in its own function: saveUserCount()
        }
        
        function saveUserCount() { 
            localStorage.setItem(LOCAL_STORAGE_KEYS.USER_COUNT, currentCount); 
            userCountElement.textContent = currentCount.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US');
        }

        function updateAndIncrementUserCount() {
            currentCount += (Math.floor(Math.random() * 5) + 3); 
            saveUserCount(); // Save immediately after incrementing
        }


        // =======================================
        //          ট্রান্সলেশন লজিক
        // =======================================
        function getOriginalText(key) {
            const bnTexts = {
                pageTitle: "টেলিগ্রাম বাজার প্রিমিয়াম",
                premiumAccessTitle: "প্রিমিয়াম অ্যাক্সেস",
                popupMessage: "আমাদের বিশেষ টেলিগ্রাম গ্রুপগুলোতে আপনাকে স্বাগতম! প্রিমিয়াম কন্টেন্টের জন্য এখনই জয়েন করুন।",
                joinNow: "জয়েন করুন",
                close: "কেটে দিন",
                headerTitle: "টেলিগ্রাম বাজার",
                viewGroups: "গ্রুপ দেখুন",
                viewReviews: "রিভিউ দেখুন",
                purchaseHistory: "ক্রয়ের ইতিহাস",
                viewCart: "কার্ট দেখুন",
                userCountLabel: "ব্যবহারকারী",
                aboutUsTitle: "আমাদের সম্পর্কে",
                aboutUsText: "টেলিগ্রাম বাজার হলো একটি প্ল্যাটফর্ম যেখানে ব্যবহারকারীরা টেলিগ্রাম গ্রুপ বিশ্বাসের সাথে কিনতে পারেন। আমার সততার সাথে সার্ভিস দিয়ে আসছি। আমাদের সাথে থাকুন ধন্যবাদ 🔥",
                supportTitle: "সাপোর্ট",
                clickHere: "এখানে ক্লিক করুন",
                copyright: "© 2025 টেলিগ্রাম বাজার | সমস্ত অধিকার সংরক্ষিত।",
                groupListTitle: "18+ গ্রুপ সমূহ",
                searchPlaceholder: "গ্রুপ নাম বা বিবরণ দিয়ে সার্চ করুন...",
                previous: "পূর্ববর্তী",
                next: "পরবর্তী",
                pageInfo: "পৃষ্ঠা ১", 
                backToHome: "হোম পেজে ফিরে যান",
                myCartTitle: "আমার কার্ট",
                totalPriceLabel: "মোট দাম:",
                buyAll: "একসাথে সব কিনুন",
                completePaymentTitle: "পেমেন্ট সম্পন্ন করুন",
                buyingGroup: "আপনি কিনছেন",
                step1Title: "ধাপ ১: পেমেন্ট করুন",
                step1Instruction: "নিচের যেকোনো একটি নম্বরে **Send Money** করুন।",
                copyButton: "কপি",
                step2Title: "ধাপ ২: ফর্ম পূরণ",
                telegramInfoText: "যে টেলিগ্রাম আইডিতে এড হবে সেই আইডিটার তথ্য দিন:",
                yourNamePlaceholder: "আপনার নাম",
                transactionIdText: "ট্রানজেকশন আইডি:",
                transactionIdPlaceholder: "ট্রানজেকশন আইডি (Txn ID)",
                submitPayment: "Submit Payment", 
                back: "Back",
                applicationComplete: "আবেদন সম্পন্ন!",
                successMessage: "তোমার আবেদন গ্রহণ করা হয়েছে — **এই তথ্য সরাসরি টেলিগ্রাম বটে পাঠানো হয়েছে!** যাচাইয়ের পর লিংক দেওয়া হবে! ধন্যবাদ 😊",
                telegramBazarTitle: "টেলিগ্রাম বাজার",
                certNameLabel: "নাম:",
                certGroupLabel: "গ্রুপ:",
                certTxnIdLabel: "ট্রানজেকশন আইডি:",
                certVerifyCodeLabel: "যাচাই কোড:",
                certTimeLabel: "সময়:",
                certPriceLabel: "দাম:",
                downloadCertificate: "প্রমাণপত্র ডাউনলোড",
                purchaseHistoryTitle: "ক্রয়ের ইতিহাস",
                noHistoryMessage: "কোনো ক্রয়ের ইতিহাস পাওয়া যায়নি।",
                reviewTitle: "রিয়েলিস্টিক রিভিউস",
                submitReviewTitle: "আপনার মতামত দিন",
                reviewInstruction: "আপনার মূল্যবান মতামত এখানে লিখুন...",
                reviewPlaceholder: "আপনার রিভিউ এখানে লিখুন...",
                submitReviewButton: "মতামত জমা দিন",
                liveSupport: "লাইভ সাপোর্ট",
                addToCart: "কার্টে যোগ",
                removeFromCart: "সরান",
                buyNow: "কিনুন",
                demo: "ডেমো",
                videoCount: "ভিডিও সংখ্যা:",
                removed: "সরিয়ে নেওয়া হলো।",
                addedToCart: "কার্টে যোগ করা হয়েছে!",
                removedFromCart: "কার্ট থেকে সরিয়ে নেওয়া হলো।",
                comboPrice: "কম্বো মূল্য",
                cartEmpty: "কার্টে কোনো গ্রুপ নেই!",
            };
            return bnTexts[key] || key; 
        }

        function setLanguage(lang, shouldSave = true) {
            currentLang = lang;
            document.body.setAttribute('data-lang', lang);
            
            if (shouldSave) {
                 localStorage.setItem(LOCAL_STORAGE_KEYS.LANGUAGE, lang); 
            }

            const elements = document.querySelectorAll('[data-bn]');
            elements.forEach(el => {
                const key = el.getAttribute('data-bn');
                if (lang === 'en' && translations.en[key]) {
                    if (el.tagName === 'INPUT' && el.placeholder) {
                        el.placeholder = translations.en[el.getAttribute('data-bn') + 'Placeholder'] || el.placeholder;
                    } else if (el.tagName === 'TEXTAREA' && el.placeholder) {
                        el.placeholder = translations.en[el.getAttribute('data-bn') + 'Placeholder'] || el.placeholder;
                    } else if (el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA') {
                        el.textContent = translations.en[key];
                    }
                } else {
                    const bnText = getOriginalText(key); 
                    if (bnText) {
                        if (el.tagName === 'INPUT' && el.placeholder) {
                            el.placeholder = getOriginalText(el.getAttribute('data-bn') + 'Placeholder') || el.placeholder;
                        } else if (el.tagName === 'TEXTAREA' && el.placeholder) {
                            el.placeholder = getOriginalText(el.getAttribute('data-bn') + 'Placeholder') || el.placeholder;
                        } else if (el.tagName !== 'INPUT' && el.tagName !== 'TEXTAREA') {
                            el.textContent = bnText;
                        }
                    }
                }
            });
            
            updatePaginationText(currentGroupData);
            renderCart();
            saveUserCount(); 
            
            const currentInterfaceId = document.querySelector('.container > div:not(.hidden)')?.id.replace('-interface', '');
            if (currentInterfaceId === 'groups') {
                 displayGroups(currentGroupData, currentPage); 
            }
            if (currentInterfaceId === 'history') {
                 renderHistory(); 
            }
            if (currentInterfaceId === 'review') {
                 renderReviews(); 
            }

            document.getElementById('lang-bn').classList.remove('active');
            document.getElementById('lang-en').classList.remove('active');
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            document.documentElement.lang = lang; 

            const titleElement = document.querySelector('title');
            if (lang === 'en' && translations.en.pageTitle) {
                titleElement.textContent = translations.en.pageTitle;
            } else if (lang === 'bn') {
                titleElement.textContent = getOriginalText('pageTitle');
            }
        }

        // =======================================
        //      ইন্টারফেস দেখান/লুকান ও হিস্টরি লজিক 
        // =======================================
        function hideAllInterfaces() { interfaces.forEach(el => el.classList.add('hidden')); }
        
        /**
         * ইন্টারফেস পরিবর্তন করে এবং ব্রাউজার হিস্টরিতে নতুন স্টেট যোগ করে।
         * @param {string} newInterfaceId - নতুন ইন্টারফেসের ID (e.g., 'main', 'groups', 'cart')
         * @param {boolean} [pushState=true] - যদি true হয়, তাহলে এটি হিস্টরিতে একটি নতুন এন্ট্রি যোগ করবে।
         * @param {object} [stateData={}] - হিস্টরি স্টেটের জন্য অতিরিক্ত ডেটা।
         */
        function changeInterface(newInterfaceId, pushState = true, stateData = {}) {
            hideAllInterfaces();
            const element = document.getElementById(`${newInterfaceId}-interface`);
            if (element) {
                element.classList.remove('hidden');
                window.scrollTo(0, 0);

                if (pushState) {
                    const state = { interfaceId: newInterfaceId, ...stateData };
                    history.pushState(state, '', `#${newInterfaceId}`);
                    // লোকাল স্টোরেজে বর্তমান ইন্টারফেস সেভ করা
                    localStorage.setItem(LOCAL_STORAGE_KEYS.CURRENT_INTERFACE, newInterfaceId);
                }
            }
            
            // স্পেসিফিক ইন্টারফেসের জন্য প্রয়োজনীয় ফাংশন কল করা (ত্রুটি সংশোধন করা হয়েছে)
            switch (newInterfaceId) {
                case 'main': updateCartCount(); break;
                case 'groups': 
                    document.getElementById('group-search-bar').value = ''; 
                    currentGroupData = allGroups;
                    currentPage = 1; 
                    displayGroups(currentGroupData, currentPage); 
                    break;
                case 'cart': renderCart(); break;
                case 'history': renderHistory(); break;
                case 'review': renderReviews(); break; // <-- এই কলটি যুক্ত করা হয়েছে
                case 'success': 
                    // success interface-এর জন্য ডেটা আলাদাভাবে হ্যান্ডেল করা হয়
                    break;
                case 'payment':
                    // payment interface-এর জন্য ডেটা আলাদাভাবে হ্যান্ডেল করা হয়
                    break;
                default: 
            }
        }
        
        // সব `showXInterface()` ফাংশনগুলোকে `changeInterface()` দিয়ে রিরাইট করা হয়েছে:
        function showMainInterface() { changeInterface('main'); }
        function showGroupsInterface() { changeInterface('groups'); }
        function showCartInterface() { changeInterface('cart'); }
        function showHistoryInterface() { changeInterface('history'); }
        function showReviewInterface() { changeInterface('review'); }
        function showSuccessInterface(data) {
            changeInterface('success');
            document.getElementById('cert-name').textContent = data.userName;
            document.getElementById('cert-group').textContent = data.groupName;
            document.getElementById('cert-txnid').textContent = data.transactionId; 
            document.getElementById('cert-code').textContent = data.verifyCode;
            document.getElementById('cert-time').textContent = data.time;
            document.getElementById('cert-price').textContent = data.price.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US') + (currentLang === 'bn' ? ' ৳' : ' $');
        }
        
        function showPaymentInterface(group, source = 'groups') {
            purchaseItem = group;
            lastInterface = source; 
            changeInterface('payment', true, { group: group, source: source });
            
            document.getElementById('payment-group-name').textContent = group.name;
            document.getElementById('payment-group-price').textContent = group.price.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US'); 
            document.getElementById('group-id-for-payment').value = group.id;
            
            document.getElementById('user-name').value = '';
            document.getElementById('telegram-username').value = '';
            document.getElementById('transaction-id').value = '';
            paymentBackLink.onclick = handlePaymentBack; 
        }
        
        function handlePaymentBack() {
            // পেমেন্ট পেজ থেকে ব্যাক করলে ম্যানুয়ালি `history.back()` কল করলে আর দরকার হবে না।
            // যেহেতু `showPaymentInterface` একটি নতুন হিস্টরি স্টেট তৈরি করে, তাই ব্যাক বাটন চাপলেই
            // আগের পেজে (কার্ট বা গ্রুপে) ফিরে যাবে।
            window.history.back(); 
        }

        function closeModal() {
            welcomeModal.classList.add('hidden');
            // পপ-আপ বন্ধের পর মেইন ইন্টারফেসে যাওয়ার সময় হিস্টরি স্টেট তৈরি করা
            changeInterface('main'); 
        }

        // --- window.onpopstate: ব্যাক বাটন চাপলে কি হবে ---
        window.onpopstate = (event) => {
            if (welcomeModal.classList.contains('hidden') === false) {
                // পপ-আপ খোলা থাকলে ব্যাক বাটনে সাইট বন্ধ না করে পপ-আপ বন্ধ করবে
                closeModal();
                return;
            }

            const state = event.state;
            if (state && state.interfaceId) {
                changeInterface(state.interfaceId, false, state); // pushState = false
            } else {
                // স্টেট না থাকলে (যেমন ব্রাউজারের প্রথম এন্ট্রি) মেইন পেজে নিয়ে যাওয়া
                changeInterface('main', false); 
            }
        };


        // =======================================
        //          গ্রুপ রেন্ডারিং 
        // =======================================
        function createGroupCard(group) {
            const isAdded = cart.some(item => item.id === group.id);
            const addButtonClass = isAdded ? 'btn-add added' : 'btn-add';
            
            const btnCartText = currentLang === 'en' ? (isAdded ? '<i class="fas fa-minus-circle"></i> Remove' : '<i class="fas fa-cart-plus"></i> Add to Cart') : (isAdded ? '<i class="fas fa-minus-circle"></i> সরান' : '<i class="fas fa-cart-plus"></i> কার্টে যোগ');
            const btnBuyText = currentLang === 'en' ? '<i class="fas fa-bolt"></i> Buy Now' : '<i class="fas fa-bolt"></i> কিনুন';
            const btnDemoText = currentLang === 'en' ? '<i class="fab fa-telegram-plane"></i> Demo' : '<i class="fab fa-telegram-plane"></i> ডেমো';
            const videoCountLabel = currentLang === 'en' ? 'Videos:' : 'ভিডিও সংখ্যা:';


            return `
                <div class="group-card">
                    <div class="group-header">
                        <h3>${group.name}</h3>
                        <span style="font-weight: 700; color: #e53935; font-size: 1.1em;">৳ ${group.price.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US')}</span>
                    </div>
                    <p style="font-size: 0.9em; color: #555; margin: 5px 0 10px 0;">${group.desc}</p>
                    <p style="font-size: 0.85em; color: #00897b; font-weight: 600;">${videoCountLabel} ${group.count}+</p>
                    <div class="group-actions">
                        <button class="action-button ${addButtonClass}" onclick="addToCart(${group.id})">${btnCartText}</button>
                        <button class="action-button btn-buy-single" onclick="showPaymentInterface(allGroups.find(g => g.id === ${group.id}), 'groups')">${btnBuyText}</button>
                        <a href="${group.demoLink}" target="_blank" class="action-button btn-demo">${btnDemoText}</a>
                    </div>
                </div>
            `;
        }
        function displayGroups(groups, page) {
            groupListElement.innerHTML = '';
            const startIndex = (page - 1) * groupsPerPage;
            const endIndex = startIndex + groupsPerPage;
            const groupsToDisplay = groups.slice(startIndex, endIndex);

            groupsToDisplay.forEach(group => { groupListElement.innerHTML += createGroupCard(group); });

            const totalGroups = groups.length;
            const totalPages = Math.ceil(totalGroups / groupsPerPage);
            updatePaginationText(groups, totalPages);
            

            if (totalGroups === 0) { 
                groupListElement.innerHTML = `<p style="text-align: center; color: #999; padding: 15px;">${currentLang === 'en' ? 'No groups found.' : 'কোনো গ্রুপ পাওয়া যায়নি।'}</p>`; 
            }
        }
        
        function updatePaginationText(groups, totalPages = Math.ceil(groups.length / groupsPerPage)) {
            const pageInfo = document.getElementById('page-info');
            const prevButton = document.getElementById('prev-button').querySelector('span');
            const nextButton = document.getElementById('next-button').querySelector('span');

            if (currentLang === 'en') {
                 pageInfo.textContent = `Page ${currentPage} / ${totalPages}`;
                 prevButton.textContent = 'Previous';
                 nextButton.textContent = 'Next';
            } else {
                 pageInfo.textContent = `পৃষ্ঠা ${currentPage} / ${totalPages}`;
                 prevButton.textContent = 'পূর্ববর্তী';
                 nextButton.textContent = 'পরবর্তী';
            }
            document.getElementById('prev-button').disabled = currentPage === 1;
            document.getElementById('next-button').disabled = currentPage === totalPages || totalPages === 0;
        }

        function changePage(direction) {
            const totalPages = Math.ceil(currentGroupData.length / groupsPerPage);
            const newPage = currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                displayGroups(currentGroupData, currentPage);
                window.scrollTo(0, 0); 
            }
        }
        function filterGroups() {
            const searchInput = document.getElementById('group-search-bar').value.toLowerCase();
            const filteredGroups = allGroups.filter(group => 
                group.name.toLowerCase().includes(searchInput) || 
                group.desc.toLowerCase().includes(searchInput)
            );
            
            currentGroupData = filteredGroups;
            currentPage = 1; 
            displayGroups(currentGroupData, currentPage);
        }

        // =======================================
        //          পেমেন্ট ও অন্যান্য ফাংশন
        // =======================================
        
        function sendToTelegramBot(data) {
            const message = `
**🔥 New Payment Application 🔥**
-----------------------------------------
**User Data:**
👤 Name: ${data.userName}
💬 Telegram User: ${data.telegramUsername}
-----------------------------------------
**Payment Data:**
💰 Price: ${data.price} BDT
🔑 Transaction ID: ${data.transactionId}
🛡️ Verify Code: ${data.verifyCode}
-----------------------------------------
**Group Data:**
📽️ Group: ${data.groupName}
⏱️ Time: ${data.time}
            `;
            
            if (TELEGRAM_BOT_API_URL === 'YOUR_SERVER_OR_TELEGRAM_BOT_API_ENDPOINT_HERE') {
                console.warn("❌ Telegram API URL not set. Data is logged to console:");
                console.log(message);
                return;
            }
        }

        function generateUniqueCode(length = 6) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) { result += chars.charAt(Math.floor(Math.random() * chars.length)); }
            return result;
        }

        function submitPayment(event) {
            event.preventDefault(); 
            
            const group = purchaseItem;
            const userName = document.getElementById('user-name').value;
            const telegramUsername = document.getElementById('telegram-username').value;
            const transactionId = document.getElementById('transaction-id').value;
            const verifyCode = generateUniqueCode();
            const now = new Date();
            
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            const dateString = `${now.getDate().toString().padStart(2, '0')}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getFullYear()}`;
            const formattedTime = `${dateString} ${timeString}`; 

            const purchaseData = {
                id: Date.now(), groupName: group.name, price: group.price, userName: userName,
                telegramUsername: telegramUsername, transactionId: transactionId, verifyCode: verifyCode,
                time: formattedTime, purchaseDate: new Date().toLocaleDateString('bn-IN')
            };

            sendToTelegramBot(purchaseData); 
            
            if (group.id === 'cart-combined') { 
                cart = []; 
                updateCartCount(); 
                saveDataToLocalStorage(); 
            }
            
            purchaseHistory.push(purchaseData); 
            saveDataToLocalStorage(); 
            showSuccessInterface(purchaseData);
        }
        
        function downloadCertificate(historyItemData = null) {
            let targetElement; let fileName;
            const priceText = (historyItemData ? historyItemData.price : document.getElementById('cert-price').textContent).toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US') + (currentLang === 'bn' ? ' ৳' : ' $');
            const certTitle = currentLang === 'en' ? 'Telegram Bazar' : 'টেলিগ্রাম বাজার';
            const successMsg = currentLang === 'en' ? 'Application Complete!' : 'আবেদন সম্পন্ন!';
            const nameLabel = currentLang === 'en' ? 'Name:' : 'নাম:';
            const groupLabel = currentLang === 'en' ? 'Group:' : 'গ্রুপ:';
            const txnidLabel = currentLang === 'en' ? 'Transaction ID:' : 'ট্রানজেকশন আইডি:';
            const codeLabel = currentLang === 'en' ? 'Verify Code:' : 'যাচাই কোড:';
            const timeLabel = currentLang === 'en' ? 'Time:' : 'সময়:';
            const priceLabel = currentLang === 'en' ? 'Price:' : 'দাম:';

            if (historyItemData) {
                const tempCert = createTempCertificate(historyItemData, certTitle, successMsg, nameLabel, groupLabel, txnidLabel, codeLabel, timeLabel, priceLabel);
                document.body.appendChild(tempCert);
                targetElement = tempCert;
                fileName = `Proof_TXN_${historyItemData.transactionId}.png`;
            } else {
                targetElement = certificateToDownload;
                const txnid = document.getElementById('cert-txnid').textContent;
                fileName = `Proof_TXN_${txnid}.png`;
            }

            html2canvas(targetElement, { scale: 2, useCORS: true, backgroundColor: '#ffffff' }).then(canvas => {
                const link = document.createElement('a');
                link.download = fileName;
                link.href = canvas.toDataURL('image/png');
                link.click();
                if (historyItemData) { targetElement.remove(); }
                if (!historyItemData) { alert(currentLang === 'en' ? "Certificate download complete!" : "প্রমাণপত্র ডাউনলোড সম্পন্ন হয়েছে!"); }
            }).catch(err => { console.error("Download failed:", err); alert(currentLang === 'en' ? "Download failed. Check console." : "ডাউনলোড ব্যর্থ হয়েছে। কনসোল দেখুন।"); });
        }
        
        function createTempCertificate(data, certTitle, successMsg, nameLabel, groupLabel, txnidLabel, codeLabel, timeLabel, priceLabel) {
            const tempDiv = document.createElement('div');
            tempDiv.id = 'temp-certificate';
            tempDiv.style.cssText = 'position: absolute; top: -9999px; width: 400px; background-color: #ffffff; padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 12px;';
            tempDiv.innerHTML = `
                <h2 style="color: #43a047; text-align: center;">${successMsg}</h2>
                <div class="certificate-box" style="border: 1px solid #a5d6a7;">
                    <h3 style="margin-top: 0; color: #1e3a8a; font-weight: 700;">${certTitle}</h3>
                    <div class="cert-item"><span class="cert-label">${nameLabel}</span> <span class="cert-value">${data.userName}</span></div>
                    <div class="cert-item"><span class="cert-label">${groupLabel}</span> <span class="cert-value">${data.groupName}</span></div>
                    <div class="cert-item"><span class="cert-label">${txnidLabel}</span> <span class="cert-value">${data.transactionId}</span></div>
                    <div class="cert-item"><span class="cert-label">${codeLabel}</span> <span class="cert-value">${data.verifyCode}</span></div>
                    <div class="cert-item"><span class="cert-label">${timeLabel}</span> <span class="cert-value">${data.time}</span></div>
                    <div class="cert-item"><span class="cert-label">${priceLabel}</span> <span class="cert-value price" style="color: #e53935;">${data.price.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US')} ${currentLang === 'bn' ? '৳' : '$'}</span></div>
                </div>
            `;
            return tempDiv;
        }

        function renderHistory() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            
            const noHistoryMessage = currentLang === 'en' ? 'No purchase history found.' : 'কোনো ক্রয়ের ইতিহাস পাওয়া যায়নি।';
            const downloadCertText = currentLang === 'en' ? '<i class="fas fa-file-download"></i> Download Certificate' : '<i class="fas fa-file-download"></i> প্রমাণপত্র ডাউনলোড';
            const noLinkText = currentLang === 'en' ? '<i class="fas fa-headset"></i> Not received link yet' : '<i class="fas fa-headset"></i> এখনো এড পাইনি';
            const priceCurrency = currentLang === 'bn' ? ' ৳' : ' $';
            const priceLocale = currentLang === 'bn' ? 'bn-IN' : 'en-US';
            const purchaseDateLabel = currentLang === 'en' ? 'Purchase Date:' : 'ক্রয় তারিখ:';
            const txnidLabel = currentLang === 'en' ? 'Transaction ID:' : 'ট্রানজেকশন আইডি:';
            const codeLabel = currentLang === 'en' ? 'Verify Code:' : 'যাচাই কোড:';

            if (purchaseHistory.length === 0) {
                historyList.innerHTML = `<p style="text-align: center; color: #999; padding: 15px;">${noHistoryMessage}</p>`;
                return;
            }
            purchaseHistory.slice().reverse().forEach(item => {
                const supportLink = SUPPORT_LINK.replace('[TXN_ID]', item.transactionId);
                historyList.innerHTML += `
                    <div class="history-item">
                        <div class="history-item-details">
                            <div style="font-weight: 700; color: #1e3a8a; margin-bottom: 5px;">${item.groupName} (${item.price.toLocaleString(priceLocale)}${priceCurrency})</div>
                            <div style="font-size: 0.9em; color: #455a64;">
                                ${purchaseDateLabel} ${item.purchaseDate}<br>
                                ${txnidLabel} ${item.transactionId}<br>
                                ${codeLabel} <span style="color: #f97316; font-weight: 700;">${item.verifyCode}</span>
                            </div>
                        </div>
                        <div class="history-item-actions">
                            <button class="btn-download-history" onclick='downloadCertificate(${JSON.stringify(item)})'>
                                ${downloadCertText}
                            </button>
                            <a href="${supportLink}" target="_blank" class="btn-support">
                                ${noLinkText}
                            </a>
                        </div>
                    </div>
                `;
            });
        }
        
        // --- রিভিউ রেন্ডারিং ফাংশন --- 
        function renderReviews() {
            const reviewsList = document.getElementById('reviews-list');
            reviewsList.innerHTML = '';
            allReviews.forEach(review => {
                reviewsList.innerHTML += `
                    <div class="review-card">
                        <div class="review-profile" style="background-color: ${review.color};">${review.initial}</div>
                        <div class="review-content">
                            <p class="name">${review.name}</p>
                            <p class="text">${review.text}</p>
                        </div>
                        <div class="review-actions">
                            <span class="like-button"><i class="fas fa-thumbs-up"></i></span>
                            <span>${review.likes}</span>
                        </div>
                    </div>
                `;
            });
        }
        
        function updateCartCount() { cartCountElement.textContent = `(${cart.length})`; }
        function addToCart(groupId) {
            const groupToAdd = allGroups.find(g => g.id === groupId);
            const existingItem = cart.find(item => item.id === groupId);
            const addedText = currentLang === 'en' ? translations.en.addedToCart : getOriginalText('addedToCart');
            const removedText = currentLang === 'en' ? translations.en.removedFromCart : getOriginalText('removedFromCart');

            if (!existingItem) { 
                cart.push(groupToAdd); 
                alert(`${groupToAdd.name} ${addedText}`); 
            } else { 
                cart = cart.filter(item => item.id !== groupId); 
                alert(`${groupToAdd.name} ${removedText}`); 
            }
            saveDataToLocalStorage(); 
            updateCartCount();
            if (document.getElementById('groups-interface').classList.contains('hidden') === false) {
                 displayGroups(currentGroupData, currentPage); 
            }
        }

        function renderCart() {
            const cartItemsList = document.getElementById('cart-items-list');
            const cartTotalPrice = document.getElementById('cart-total-price');
            const buyAllButton = document.getElementById('buy-all-btn');
            const priceLocale = currentLang === 'bn' ? 'bn-IN' : 'en-US';
            const priceCurrency = currentLang === 'bn' ? ' ৳' : ' $';
            const removeText = currentLang === 'en' ? 'Remove' : 'সরান';
            
            cartItemsList.innerHTML = '';
            let total = 0;
            if (cart.length === 0) {
                cartItemsList.innerHTML = `<p style="text-align: center; color: #999; padding: 15px;">${currentLang === 'en' ? 'Your cart is empty.' : 'কার্টটি খালি।'}</p>`;
                buyAllButton.disabled = true;
            } else {
                cart.forEach(item => { total += item.price; });
                cartItemsList.innerHTML = cart.map(item => `
                    <div class="cart-item group-card" style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
                        <div class="item-details"><h4 style="margin: 0; color: #3949ab;">${item.name}</h4><p style="margin: 0;">${currentLang === 'en' ? 'Price' : 'দাম'}: ${item.price.toLocaleString(priceLocale)}${priceCurrency}</p></div>
                        <button onclick="removeFromCart(${item.id})" style="background: #e53935; color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 0.85em;"><i class="fas fa-trash-alt"></i> ${removeText}</button>
                    </div>
                `).join('');
                buyAllButton.disabled = false;
            }
            cartTotalPrice.textContent = `৳ ${total.toLocaleString(priceLocale)}`;
        }
        function removeFromCart(groupId) { 
            cart = cart.filter(item => item.id !== groupId); 
            renderCart(); 
            updateCartCount(); 
            saveDataToLocalStorage(); 
        }
        function checkoutFromCart() {
            const cartEmpty = currentLang === 'en' ? translations.en.cartEmpty : getOriginalText('cartEmpty');
            const comboPriceAlert = currentLang === 'en' ? translations.en.comboPrice : getOriginalText('comboPrice');

            if (cart.length === 0) { alert(cartEmpty); return; }
            const totalAmount = cart.reduce((sum, item) => sum + item.price, 0);
            const combinedGroup = { id: 'cart-combined', name: `Combo Pack (${cart.length} Groups)`, price: totalAmount, demoLink: '#', desc: 'Buying all groups in the cart together.' };
            showPaymentInterface(combinedGroup, 'cart'); 
            alert(`${comboPriceAlert} ৳ ${totalAmount.toLocaleString(currentLang === 'bn' ? 'bn-IN' : 'en-US')}. ${currentLang === 'en' ? 'Now enter the information in the payment form.' : 'এখন পেমেন্ট ফর্মে তথ্য দিন।'}`);
        }
        
        function submitReview() { /* ডামি ফাংশন */ alert(currentLang === 'en' ? "Your review has been submitted! It will be added after verification." : "আপনার মতামত জমা দেওয়া হয়েছে! রিভিউটি যাচাইয়ের পর যুক্ত করা হবে।"); document.getElementById('user-review').value = ''; }
        function copyToClipboard(text) { 
            navigator.clipboard.writeText(text).then(() => { 
                alert((currentLang === 'en' ? "Copied: " : "কপি করা হয়েছে: ") + text); 
            }); 
        }
        

        // --- ইনিশিয়ালাইজেশন ---
        window.onload = () => { 
            loadDataFromLocalStorage();
            saveUserCount(); 
            setInterval(updateAndIncrementUserCount, 5000); 
            
            hideAllInterfaces();

            // ব্রাউজার হিস্টরির ডিফল্ট স্টেট তৈরি করা
            history.replaceState({ interfaceId: 'main' }, '', '#main');
            
            // সাইটে প্রথমবার ঢুকলে স্বাগত পপ-আপ দেখানো
            if (!localStorage.getItem('telegramBazarFirstVisit')) {
                welcomeModal.classList.remove('hidden');
                localStorage.setItem('telegramBazarFirstVisit', 'false');
            } else {
                // সরাসরি মেইন ইন্টারফেসে নিয়ে যাওয়া
                changeInterface('main', false); 
            }
        };

    </script>
</body>
</html>
